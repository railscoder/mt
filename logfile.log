# Logfile created on 2017-07-28 00:47:28 +0300 by logger.rb/47272
2017-07-27T21:47:31.207Z 24163 TID-2b0js INFO: Booting Sidekiq 4.2.9 with redis options {:url=>"redis://localhost:6379/0"}
2017-07-27T21:47:31.719Z 24163 TID-2b0js INFO: Running in ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-linux]
2017-07-27T21:47:31.719Z 24163 TID-2b0js INFO: See LICENSE and the LGPL-3.0 for licensing details.
2017-07-27T21:47:31.719Z 24163 TID-2b0js INFO: Upgrade to Sidekiq Pro for more features and support: http://sidekiq.org
2017-07-27T21:49:00.359Z 24163 TID-jkv8c ScanGisWorker JID-25cede7cd4279581a6b34f91 INFO: start
2017-07-27T21:49:00.398Z 24163 TID-jkv8c ScanGisWorker JID-25cede7cd4279581a6b34f91 INFO: fail: 0.039 sec
2017-07-27T21:49:00.399Z 24163 TID-jkv8c WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["магазин детских игрушек",1],"retry":true,"queue":"default","jid":"25cede7cd4279581a6b34f91","created_at":1501192140.2830226,"enqueued_at":1501192140.2844121,"error_message":"wrong number of arguments (2 for 3)","error_class":"ArgumentError","failed_at":1501192140.3598845,"retry_count":0},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"25cede7cd4279581a6b34f91\",\"created_at\":1501192140.2830226,\"enqueued_at\":1501192140.2844121}"}
2017-07-27T21:49:00.399Z 24163 TID-jkv8c WARN: ArgumentError: wrong number of arguments (2 for 3)
2017-07-27T21:49:00.399Z 24163 TID-jkv8c WARN: /usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:4:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T21:49:49.055Z 24163 TID-m3ums ScanGisWorker JID-25cede7cd4279581a6b34f91 INFO: start
2017-07-27T21:49:49.072Z 24163 TID-m3ums ScanGisWorker JID-25cede7cd4279581a6b34f91 INFO: fail: 0.003 sec
2017-07-27T21:49:49.073Z 24163 TID-m3ums WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["магазин детских игрушек",1],"retry":true,"queue":"default","jid":"25cede7cd4279581a6b34f91","created_at":1501192140.2830226,"enqueued_at":1501192189.0508454,"error_message":"wrong number of arguments (2 for 3)","error_class":"ArgumentError","failed_at":1501192140.3598845,"retry_count":1,"retried_at":1501192189.057596},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"25cede7cd4279581a6b34f91\",\"created_at\":1501192140.2830226,\"enqueued_at\":1501192189.0508454,\"error_message\":\"wrong number of arguments (2 for 3)\",\"error_class\":\"ArgumentError\",\"failed_at\":1501192140.3598845,\"retry_count\":0}"}
2017-07-27T21:49:49.073Z 24163 TID-m3ums WARN: ArgumentError: wrong number of arguments (2 for 3)
2017-07-27T21:49:49.074Z 24163 TID-m3ums WARN: /usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:4:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T21:50:24.689Z 24163 TID-m3woo ScanGisWorker JID-25cede7cd4279581a6b34f91 INFO: start
2017-07-27T21:50:24.696Z 24163 TID-m3woo ScanGisWorker JID-25cede7cd4279581a6b34f91 INFO: fail: 0.006 sec
2017-07-27T21:50:24.696Z 24163 TID-m3woo WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["магазин детских игрушек",1],"retry":true,"queue":"default","jid":"25cede7cd4279581a6b34f91","created_at":1501192140.2830226,"enqueued_at":1501192224.6874368,"error_message":"wrong number of arguments (2 for 3)","error_class":"ArgumentError","failed_at":1501192140.3598845,"retry_count":2,"retried_at":1501192224.6946657},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"25cede7cd4279581a6b34f91\",\"created_at\":1501192140.2830226,\"enqueued_at\":1501192224.6874368,\"error_message\":\"wrong number of arguments (2 for 3)\",\"error_class\":\"ArgumentError\",\"failed_at\":1501192140.3598845,\"retry_count\":1,\"retried_at\":1501192189.057596}"}
2017-07-27T21:50:24.697Z 24163 TID-m3woo WARN: ArgumentError: wrong number of arguments (2 for 3)
2017-07-27T21:50:24.697Z 24163 TID-m3woo WARN: /usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:4:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T21:55:42.286Z 24423 TID-357rs INFO: Booting Sidekiq 4.2.9 with redis options {:url=>"redis://localhost:6379/0"}
2017-07-27T21:55:42.547Z 24423 TID-357rs INFO: Running in ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-linux]
2017-07-27T21:55:42.548Z 24423 TID-357rs INFO: See LICENSE and the LGPL-3.0 for licensing details.
2017-07-27T21:55:42.548Z 24423 TID-357rs INFO: Upgrade to Sidekiq Pro for more features and support: http://sidekiq.org
2017-07-27T21:55:52.280Z 24423 TID-m8gl8 ScanGisWorker JID-a2cbb2891b3328d729c0cac6 INFO: start
2017-07-27T21:55:52.287Z 24423 TID-m8gl8 ScanGisWorker JID-a2cbb2891b3328d729c0cac6 INFO: fail: 0.006 sec
2017-07-27T21:55:52.287Z 24423 TID-m8gl8 WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["магазин детских игрушек",1],"retry":true,"queue":"default","jid":"a2cbb2891b3328d729c0cac6","created_at":1501192552.2701635,"enqueued_at":1501192552.2715604,"error_message":"undefined local variable or method `source' for #<ScanGisWorker:0x00000003dc8ea0 @jid=\"a2cbb2891b3328d729c0cac6\">","error_class":"NameError","failed_at":1501192552.2861228,"retry_count":0},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"a2cbb2891b3328d729c0cac6\",\"created_at\":1501192552.2701635,\"enqueued_at\":1501192552.2715604}"}
2017-07-27T21:55:52.287Z 24423 TID-m8gl8 WARN: NameError: undefined local variable or method `source' for #<ScanGisWorker:0x00000003dc8ea0 @jid="a2cbb2891b3328d729c0cac6">
2017-07-27T21:55:52.287Z 24423 TID-m8gl8 WARN: /usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:5:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T21:55:56.813Z 24423 TID-m8gwc ScanGisWorker JID-25cede7cd4279581a6b34f91 INFO: start
2017-07-27T21:55:56.814Z 24423 TID-m8gwc ScanGisWorker JID-25cede7cd4279581a6b34f91 INFO: fail: 0.001 sec
2017-07-27T21:55:56.814Z 24423 TID-m8gwc WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["магазин детских игрушек",1],"retry":true,"queue":"default","jid":"25cede7cd4279581a6b34f91","created_at":1501192140.2830226,"enqueued_at":1501192556.8123124,"error_message":"undefined local variable or method `source' for #<ScanGisWorker:0x00000002bd22f0 @jid=\"25cede7cd4279581a6b34f91\">","error_class":"NameError","failed_at":1501192140.3598845,"retry_count":3,"retried_at":1501192556.8139963},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"25cede7cd4279581a6b34f91\",\"created_at\":1501192140.2830226,\"enqueued_at\":1501192556.8123124,\"error_message\":\"wrong number of arguments (2 for 3)\",\"error_class\":\"ArgumentError\",\"failed_at\":1501192140.3598845,\"retry_count\":2,\"retried_at\":1501192224.6946657}"}
2017-07-27T21:55:56.814Z 24423 TID-m8gwc WARN: NameError: undefined local variable or method `source' for #<ScanGisWorker:0x00000002bd22f0 @jid="25cede7cd4279581a6b34f91">
2017-07-27T21:55:56.815Z 24423 TID-m8gwc WARN: /usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:5:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T21:56:37.290Z 24423 TID-m9748 ScanGisWorker JID-a2cbb2891b3328d729c0cac6 INFO: start
2017-07-27T21:56:37.291Z 24423 TID-m9748 ScanGisWorker JID-a2cbb2891b3328d729c0cac6 INFO: fail: 0.002 sec
2017-07-27T21:56:37.292Z 24423 TID-m9748 WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["магазин детских игрушек",1],"retry":true,"queue":"default","jid":"a2cbb2891b3328d729c0cac6","created_at":1501192552.2701635,"enqueued_at":1501192597.2884316,"error_message":"undefined local variable or method `source' for #<ScanGisWorker:0x0000000421e068 @jid=\"a2cbb2891b3328d729c0cac6\">","error_class":"NameError","failed_at":1501192552.2861228,"retry_count":1,"retried_at":1501192597.2905047},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"a2cbb2891b3328d729c0cac6\",\"created_at\":1501192552.2701635,\"enqueued_at\":1501192597.2884316,\"error_message\":\"undefined local variable or method `source' for #<ScanGisWorker:0x00000003dc8ea0 @jid=\\\"a2cbb2891b3328d729c0cac6\\\">\",\"error_class\":\"NameError\",\"failed_at\":1501192552.2861228,\"retry_count\":0}"}
2017-07-27T21:56:37.292Z 24423 TID-m9748 WARN: NameError: undefined local variable or method `source' for #<ScanGisWorker:0x0000000421e068 @jid="a2cbb2891b3328d729c0cac6">
2017-07-27T21:56:37.292Z 24423 TID-m9748 WARN: /usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:5:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T21:58:17.138Z 24557 TID-a1bbc INFO: Booting Sidekiq 4.2.9 with redis options {:url=>"redis://localhost:6379/0"}
2017-07-27T21:58:17.398Z 24557 TID-a1bbc INFO: Running in ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-linux]
2017-07-27T21:58:17.398Z 24557 TID-a1bbc INFO: See LICENSE and the LGPL-3.0 for licensing details.
2017-07-27T21:58:17.398Z 24557 TID-a1bbc INFO: Upgrade to Sidekiq Pro for more features and support: http://sidekiq.org
2017-07-27T21:58:19.723Z 24557 TID-r16mo ScanGisWorker JID-41dae9448c2b6d78310c4959 INFO: start
2017-07-27T21:58:29.727Z 24557 TID-r16mo ScanGisWorker JID-41dae9448c2b6d78310c4959 INFO: fail: 10.004 sec
2017-07-27T21:58:29.727Z 24557 TID-r16mo WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["магазин детских игрушек",1],"retry":true,"queue":"default","jid":"41dae9448c2b6d78310c4959","created_at":1501192699.7153504,"enqueued_at":1501192699.7162857,"error_message":"You cannot call create unless the parent is saved","error_class":"ActiveRecord::RecordNotSaved","failed_at":1501192709.7262037,"retry_count":0},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"41dae9448c2b6d78310c4959\",\"created_at\":1501192699.7153504,\"enqueued_at\":1501192699.7162857}"}
2017-07-27T21:58:29.727Z 24557 TID-r16mo WARN: ActiveRecord::RecordNotSaved: You cannot call create unless the parent is saved
2017-07-27T21:58:29.727Z 24557 TID-r16mo WARN: /usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:489:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/has_many_association.rb:130:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:171:in `create'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_proxy.rb:324:in `create'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:35:in `block in scan_item'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `block in transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/transaction.rb:189:in `within_new_transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/transactions.rb:211:in `transaction'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:32:in `scan_item'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:23:in `block in scan_one_page'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:190:in `block in each'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `upto'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:20:in `scan_one_page'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:9:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:8:in `call'
/usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:5:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T21:58:30.365Z 24557 TID-sty6s ScanGisWorker JID-a2cbb2891b3328d729c0cac6 INFO: start
2017-07-27T21:58:30.370Z 24557 TID-r14oo ScanGisWorker JID-25cede7cd4279581a6b34f91 INFO: start
2017-07-27T21:58:38.461Z 24557 TID-sty6s ScanGisWorker JID-a2cbb2891b3328d729c0cac6 INFO: fail: 8.095 sec
2017-07-27T21:58:38.462Z 24557 TID-sty6s WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["магазин детских игрушек",1],"retry":true,"queue":"default","jid":"a2cbb2891b3328d729c0cac6","created_at":1501192552.2701635,"enqueued_at":1501192710.3640878,"error_message":"You cannot call create unless the parent is saved","error_class":"ActiveRecord::RecordNotSaved","failed_at":1501192552.2861228,"retry_count":2,"retried_at":1501192718.4606557},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"a2cbb2891b3328d729c0cac6\",\"created_at\":1501192552.2701635,\"enqueued_at\":1501192710.3640878,\"error_message\":\"undefined local variable or method `source' for #<ScanGisWorker:0x0000000421e068 @jid=\\\"a2cbb2891b3328d729c0cac6\\\">\",\"error_class\":\"NameError\",\"failed_at\":1501192552.2861228,\"retry_count\":1,\"retried_at\":1501192597.2905047}"}
2017-07-27T21:58:38.462Z 24557 TID-sty6s WARN: ActiveRecord::RecordNotSaved: You cannot call create unless the parent is saved
2017-07-27T21:58:38.462Z 24557 TID-sty6s WARN: /usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:489:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/has_many_association.rb:130:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:171:in `create'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_proxy.rb:324:in `create'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:35:in `block in scan_item'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `block in transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/transaction.rb:189:in `within_new_transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/transactions.rb:211:in `transaction'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:32:in `scan_item'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:23:in `block in scan_one_page'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:190:in `block in each'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `upto'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:20:in `scan_one_page'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:9:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:8:in `call'
/usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:5:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T21:58:38.705Z 24557 TID-r14oo ScanGisWorker JID-25cede7cd4279581a6b34f91 INFO: fail: 8.335 sec
2017-07-27T21:58:38.706Z 24557 TID-r14oo WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["магазин детских игрушек",1],"retry":true,"queue":"default","jid":"25cede7cd4279581a6b34f91","created_at":1501192140.2830226,"enqueued_at":1501192710.3697178,"error_message":"You cannot call create unless the parent is saved","error_class":"ActiveRecord::RecordNotSaved","failed_at":1501192140.3598845,"retry_count":4,"retried_at":1501192718.7048912},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"25cede7cd4279581a6b34f91\",\"created_at\":1501192140.2830226,\"enqueued_at\":1501192710.3697178,\"error_message\":\"undefined local variable or method `source' for #<ScanGisWorker:0x00000002bd22f0 @jid=\\\"25cede7cd4279581a6b34f91\\\">\",\"error_class\":\"NameError\",\"failed_at\":1501192140.3598845,\"retry_count\":3,\"retried_at\":1501192556.8139963}"}
2017-07-27T21:58:38.706Z 24557 TID-r14oo WARN: ActiveRecord::RecordNotSaved: You cannot call create unless the parent is saved
2017-07-27T21:58:38.706Z 24557 TID-r14oo WARN: /usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:489:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/has_many_association.rb:130:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:171:in `create'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_proxy.rb:324:in `create'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:35:in `block in scan_item'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `block in transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/transaction.rb:189:in `within_new_transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/transactions.rb:211:in `transaction'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:32:in `scan_item'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:23:in `block in scan_one_page'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:190:in `block in each'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `upto'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:20:in `scan_one_page'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:9:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:8:in `call'
/usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:5:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T21:58:59.409Z 24557 TID-twyw8 ScanGisWorker JID-41dae9448c2b6d78310c4959 INFO: start
2017-07-27T21:59:06.278Z 24557 TID-twyw8 ScanGisWorker JID-41dae9448c2b6d78310c4959 INFO: fail: 6.869 sec
2017-07-27T21:59:06.279Z 24557 TID-twyw8 WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["магазин детских игрушек",1],"retry":true,"queue":"default","jid":"41dae9448c2b6d78310c4959","created_at":1501192699.7153504,"enqueued_at":1501192739.4082673,"error_message":"You cannot call create unless the parent is saved","error_class":"ActiveRecord::RecordNotSaved","failed_at":1501192709.7262037,"retry_count":1,"retried_at":1501192746.2767022},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"41dae9448c2b6d78310c4959\",\"created_at\":1501192699.7153504,\"enqueued_at\":1501192739.4082673,\"error_message\":\"You cannot call create unless the parent is saved\",\"error_class\":\"ActiveRecord::RecordNotSaved\",\"failed_at\":1501192709.7262037,\"retry_count\":0}"}
2017-07-27T21:59:06.279Z 24557 TID-twyw8 WARN: ActiveRecord::RecordNotSaved: You cannot call create unless the parent is saved
2017-07-27T21:59:06.280Z 24557 TID-twyw8 WARN: /usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:489:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/has_many_association.rb:130:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:171:in `create'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_proxy.rb:324:in `create'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:35:in `block in scan_item'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `block in transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/transaction.rb:189:in `within_new_transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/transactions.rb:211:in `transaction'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:32:in `scan_item'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:23:in `block in scan_one_page'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:190:in `block in each'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `upto'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:20:in `scan_one_page'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:9:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:8:in `call'
/usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:5:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T21:59:38.500Z 24557 TID-r14f8 ScanGisWorker JID-41dae9448c2b6d78310c4959 INFO: start
2017-07-27T21:59:45.138Z 24557 TID-r14f8 ScanGisWorker JID-41dae9448c2b6d78310c4959 INFO: fail: 6.638 sec
2017-07-27T21:59:45.139Z 24557 TID-r14f8 WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["магазин детских игрушек",1],"retry":true,"queue":"default","jid":"41dae9448c2b6d78310c4959","created_at":1501192699.7153504,"enqueued_at":1501192778.4983628,"error_message":"You cannot call create unless the parent is saved","error_class":"ActiveRecord::RecordNotSaved","failed_at":1501192709.7262037,"retry_count":2,"retried_at":1501192785.1350505},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"41dae9448c2b6d78310c4959\",\"created_at\":1501192699.7153504,\"enqueued_at\":1501192778.4983628,\"error_message\":\"You cannot call create unless the parent is saved\",\"error_class\":\"ActiveRecord::RecordNotSaved\",\"failed_at\":1501192709.7262037,\"retry_count\":1,\"retried_at\":1501192746.2767022}"}
2017-07-27T21:59:45.139Z 24557 TID-r14f8 WARN: ActiveRecord::RecordNotSaved: You cannot call create unless the parent is saved
2017-07-27T21:59:45.139Z 24557 TID-r14f8 WARN: /usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:489:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/has_many_association.rb:130:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:171:in `create'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_proxy.rb:324:in `create'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:35:in `block in scan_item'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `block in transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/transaction.rb:189:in `within_new_transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/transactions.rb:211:in `transaction'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:32:in `scan_item'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:23:in `block in scan_one_page'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:190:in `block in each'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `upto'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:20:in `scan_one_page'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:9:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:8:in `call'
/usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:5:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T22:00:21.444Z 24557 TID-r146c ScanGisWorker JID-a2cbb2891b3328d729c0cac6 INFO: start
2017-07-27T22:00:27.820Z 24557 TID-r146c ScanGisWorker JID-a2cbb2891b3328d729c0cac6 INFO: fail: 6.376 sec
2017-07-27T22:00:27.820Z 24557 TID-r146c WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["магазин детских игрушек",1],"retry":true,"queue":"default","jid":"a2cbb2891b3328d729c0cac6","created_at":1501192552.2701635,"enqueued_at":1501192821.442608,"error_message":"You cannot call create unless the parent is saved","error_class":"ActiveRecord::RecordNotSaved","failed_at":1501192552.2861228,"retry_count":3,"retried_at":1501192827.8194857},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"a2cbb2891b3328d729c0cac6\",\"created_at\":1501192552.2701635,\"enqueued_at\":1501192821.442608,\"error_message\":\"You cannot call create unless the parent is saved\",\"error_class\":\"ActiveRecord::RecordNotSaved\",\"failed_at\":1501192552.2861228,\"retry_count\":2,\"retried_at\":1501192718.4606557}"}
2017-07-27T22:00:27.820Z 24557 TID-r146c WARN: ActiveRecord::RecordNotSaved: You cannot call create unless the parent is saved
2017-07-27T22:00:27.820Z 24557 TID-r146c WARN: /usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:489:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/has_many_association.rb:130:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:171:in `create'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_proxy.rb:324:in `create'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:35:in `block in scan_item'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `block in transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/transaction.rb:189:in `within_new_transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/transactions.rb:211:in `transaction'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:32:in `scan_item'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:23:in `block in scan_one_page'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:190:in `block in each'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `upto'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:20:in `scan_one_page'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:9:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:8:in `call'
/usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:5:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T22:00:43.749Z 24557 TID-twyg4 ScanGisWorker JID-41dae9448c2b6d78310c4959 INFO: start
2017-07-27T22:00:49.906Z 24557 TID-twyg4 ScanGisWorker JID-41dae9448c2b6d78310c4959 INFO: fail: 6.157 sec
2017-07-27T22:00:49.906Z 24557 TID-twyg4 WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["магазин детских игрушек",1],"retry":true,"queue":"default","jid":"41dae9448c2b6d78310c4959","created_at":1501192699.7153504,"enqueued_at":1501192843.7473698,"error_message":"You cannot call create unless the parent is saved","error_class":"ActiveRecord::RecordNotSaved","failed_at":1501192709.7262037,"retry_count":3,"retried_at":1501192849.9054425},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"41dae9448c2b6d78310c4959\",\"created_at\":1501192699.7153504,\"enqueued_at\":1501192843.7473698,\"error_message\":\"You cannot call create unless the parent is saved\",\"error_class\":\"ActiveRecord::RecordNotSaved\",\"failed_at\":1501192709.7262037,\"retry_count\":2,\"retried_at\":1501192785.1350505}"}
2017-07-27T22:00:49.907Z 24557 TID-twyg4 WARN: ActiveRecord::RecordNotSaved: You cannot call create unless the parent is saved
2017-07-27T22:00:49.907Z 24557 TID-twyg4 WARN: /usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:489:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/has_many_association.rb:130:in `_create_record'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_association.rb:171:in `create'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/associations/collection_proxy.rb:324:in `create'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:35:in `block in scan_item'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `block in transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/transaction.rb:189:in `within_new_transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/connection_adapters/abstract/database_statements.rb:232:in `transaction'
/usr/local/rvm/gems/ruby-2.2.2/gems/activerecord-5.0.4/lib/active_record/transactions.rb:211:in `transaction'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:32:in `scan_item'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:23:in `block in scan_one_page'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:190:in `block in each'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `upto'
/usr/local/rvm/gems/ruby-2.2.2/gems/nokogiri-1.8.0/lib/nokogiri/xml/node_set.rb:189:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:20:in `scan_one_page'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:9:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:8:in `call'
/usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:5:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T22:02:47.189Z 24720 TID-3huvo INFO: Booting Sidekiq 4.2.9 with redis options {:url=>"redis://localhost:6379/0"}
2017-07-27T22:02:48.029Z 24720 TID-3huvo INFO: Running in ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-linux]
2017-07-27T22:02:48.030Z 24720 TID-3huvo INFO: See LICENSE and the LGPL-3.0 for licensing details.
2017-07-27T22:02:48.030Z 24720 TID-3huvo INFO: Upgrade to Sidekiq Pro for more features and support: http://sidekiq.org
2017-07-27T22:02:48.784Z 24720 TID-8fr8w ScanGisWorker JID-28a3b772f06f0ae2b2c6d30e INFO: start
2017-07-27T22:02:59.270Z 24720 TID-8fqkg ScanGisWorker JID-41dae9448c2b6d78310c4959 INFO: start
2017-07-27T22:03:17.934Z 24720 TID-j60kk ScanGisWorker JID-a2cbb2891b3328d729c0cac6 INFO: start
2017-07-27T22:05:41.858Z 24720 TID-j5xeo ScanGisWorker JID-25cede7cd4279581a6b34f91 INFO: start
2017-07-27T22:10:11.343Z 24720 TID-3huvo INFO: Shutting down
2017-07-27T22:10:11.385Z 24720 TID-3huvo INFO: Terminating quiet workers
2017-07-27T22:10:11.387Z 24720 TID-8ft3k INFO: Scheduler exiting...
2017-07-27T22:10:12.006Z 24720 TID-3huvo INFO: Pausing to allow workers to finish...
2017-07-27T22:10:19.009Z 24720 TID-3huvo WARN: Terminating 4 busy worker threads
2017-07-27T22:10:19.176Z 24720 TID-3huvo WARN: Work still in progress [#<struct Sidekiq::BasicFetch::UnitOfWork queue="queue:default", job="{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"28a3b772f06f0ae2b2c6d30e\",\"created_at\":1501192968.7727177,\"enqueued_at\":1501192968.7743263}">, #<struct Sidekiq::BasicFetch::UnitOfWork queue="queue:default", job="{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"41dae9448c2b6d78310c4959\",\"created_at\":1501192699.7153504,\"enqueued_at\":1501192979.2680836,\"error_message\":\"You cannot call create unless the parent is saved\",\"error_class\":\"ActiveRecord::RecordNotSaved\",\"failed_at\":1501192709.7262037,\"retry_count\":3,\"retried_at\":1501192849.9054425}">, #<struct Sidekiq::BasicFetch::UnitOfWork queue="queue:default", job="{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"a2cbb2891b3328d729c0cac6\",\"created_at\":1501192552.2701635,\"enqueued_at\":1501192997.9304438,\"error_message\":\"You cannot call create unless the parent is saved\",\"error_class\":\"ActiveRecord::RecordNotSaved\",\"failed_at\":1501192552.2861228,\"retry_count\":3,\"retried_at\":1501192827.8194857}">, #<struct Sidekiq::BasicFetch::UnitOfWork queue="queue:default", job="{\"class\":\"ScanGisWorker\",\"args\":[\"магазин детских игрушек\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"25cede7cd4279581a6b34f91\",\"created_at\":1501192140.2830226,\"enqueued_at\":1501193141.8315568,\"error_message\":\"You cannot call create unless the parent is saved\",\"error_class\":\"ActiveRecord::RecordNotSaved\",\"failed_at\":1501192140.3598845,\"retry_count\":4,\"retried_at\":1501192718.7048912}">]
2017-07-27T22:10:19.294Z 24720 TID-3huvo INFO: Pushed 4 jobs back to Redis
2017-07-27T22:10:19.305Z 24720 TID-j5xeo ScanGisWorker JID-25cede7cd4279581a6b34f91 INFO: fail: 277.447 sec
2017-07-27T22:10:19.324Z 24720 TID-j60kk ScanGisWorker JID-a2cbb2891b3328d729c0cac6 INFO: fail: 421.39 sec
2017-07-27T22:10:19.335Z 24720 TID-8fqkg ScanGisWorker JID-41dae9448c2b6d78310c4959 INFO: fail: 440.065 sec
2017-07-27T22:10:19.336Z 24720 TID-3huvo INFO: Bye!
2017-07-27T22:14:46.009Z 24980 TID-5yvm8 INFO: Booting Sidekiq 4.2.9 with redis options {:url=>"redis://localhost:6379/0"}
2017-07-27T22:14:46.303Z 24980 TID-5yvm8 INFO: Running in ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-linux]
2017-07-27T22:14:46.304Z 24980 TID-5yvm8 INFO: See LICENSE and the LGPL-3.0 for licensing details.
2017-07-27T22:14:46.304Z 24980 TID-5yvm8 INFO: Upgrade to Sidekiq Pro for more features and support: http://sidekiq.org
2017-07-27T22:14:46.367Z 24980 TID-mv3z4 ScanGisWorker JID-dae70499f98a9a9c0db2a001 INFO: start
2017-07-27T22:20:29.214Z 24980 TID-mv3z4 ScanGisWorker JID-dae70499f98a9a9c0db2a001 INFO: done: 342.846 sec
2017-07-27T22:24:28.971Z 24980 TID-mv4ps ScanGisWorker JID-d8b77d6a1583e525d1c29e3d INFO: start
2017-07-27T22:41:15.236Z 24980 TID-mv4ps ScanGisWorker JID-d8b77d6a1583e525d1c29e3d INFO: fail: 1006.265 sec
2017-07-27T22:41:15.240Z 24980 TID-mv4ps WARN: {"context":"Job raised exception","job":{"class":"ScanGisWorker","args":["детские игрушки",1],"retry":true,"queue":"default","jid":"d8b77d6a1583e525d1c29e3d","created_at":1501194268.9560783,"enqueued_at":1501194268.9575405,"error_message":"404 Not Found","error_class":"OpenURI::HTTPError","failed_at":1501195275.1950958,"retry_count":0},"jobstr":"{\"class\":\"ScanGisWorker\",\"args\":[\"детские игрушки\",1],\"retry\":true,\"queue\":\"default\",\"jid\":\"d8b77d6a1583e525d1c29e3d\",\"created_at\":1501194268.9560783,\"enqueued_at\":1501194268.9575405}"}
2017-07-27T22:41:15.240Z 24980 TID-mv4ps WARN: OpenURI::HTTPError: 404 Not Found
2017-07-27T22:41:15.240Z 24980 TID-mv4ps WARN: /usr/local/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/open-uri.rb:358:in `open_http'
/usr/local/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/open-uri.rb:736:in `buffer_open'
/usr/local/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/open-uri.rb:211:in `block in open_loop'
/usr/local/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/open-uri.rb:209:in `catch'
/usr/local/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/open-uri.rb:209:in `open_loop'
/usr/local/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/open-uri.rb:150:in `open_uri'
/usr/local/rvm/gems/ruby-2.2.2/gems/open_uri_redirections-0.2.1/lib/open-uri/redirections_patch.rb:55:in `open_uri'
/usr/local/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/open-uri.rb:716:in `open'
/usr/local/rvm/rubies/ruby-2.2.2/lib/ruby/2.2.0/open-uri.rb:34:in `open'
/usr/local/market_tools/mt/lib/modules/scan_gis.rb:5:in `open_page'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:19:in `scan_one_page'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:9:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/core_ext/range/each.rb:5:in `each'
/usr/local/market_tools/mt/app/services/scan_gis_service.rb:8:in `call'
/usr/local/market_tools/mt/app/workers/scan_gis_worker.rb:5:in `perform'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:158:in `execute_job'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:138:in `block (4 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq.rb:36:in `block in <module:Sidekiq>'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:133:in `block (3 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:128:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/retry_jobs.rb:74:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:11:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/logging.rb:32:in `with_context'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/server/logging.rb:7:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:130:in `block in invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/middleware/chain.rb:133:in `invoke'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:132:in `block (2 levels) in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:174:in `stats'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:131:in `block in process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:106:in `block in call'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:68:in `block in wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/execution_wrapper.rb:85:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/activesupport-5.0.4/lib/active_support/reloader.rb:67:in `wrap'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/rails.rb:105:in `call'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:126:in `process'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:82:in `process_one'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/processor.rb:70:in `run'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:17:in `watchdog'
/usr/local/rvm/gems/ruby-2.2.2/gems/sidekiq-4.2.9/lib/sidekiq/util.rb:26:in `block in safe_thread'
2017-07-27T22:41:41.540Z 24980 TID-owm6g ScanGisWorker JID-d8b77d6a1583e525d1c29e3d INFO: start
